<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>AppyCrew OCR & Vision Widget Demo (v9)</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      :root {
        --appycrew-bg: #0f172a;
        --appycrew-accent: #22c55e;
        --appycrew-accent-soft: rgba(34, 197, 94, 0.12);
        --appycrew-border: #e5e7eb;
        --appycrew-text: #0f172a;
        --appycrew-muted: #6b7280;
        --appycrew-radius: 12px;
      }
      * { box-sizing: border-box; }
      body {
        margin: 0;
        padding: 0;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        background: #f3f4f6;
        color: var(--appycrew-text);
      }
      .page { max-width: 960px; margin: 0 auto; padding: 24px 16px 80px; }
      header { margin-bottom: 24px; }
      h1 { margin: 0 0 8px; font-size: 1.8rem; }
      p.lead { margin: 0; color: var(--appycrew-muted); }
      .card {
        background: #ffffff;
        border-radius: var(--appycrew-radius);
        padding: 20px;
        box-shadow: 0 10px 25px rgba(15, 23, 42, 0.06);
        border: 1px solid rgba(148, 163, 184, 0.35);
      }
      .grid { display: grid; grid-template-columns: minmax(0, 1.2fr) minmax(0, 1fr); gap: 20px; }
      @media (max-width: 800px) { .grid { grid-template-columns: minmax(0, 1fr); } }
      form.demo-form { display: grid; grid-template-columns: 1fr 1fr; gap: 12px 16px; }
      form.demo-form .full { grid-column: 1 / -1; }
      label { display: flex; flex-direction: column; font-size: 0.85rem; gap: 4px; }
      input, textarea, select {
        border-radius: 8px;
        border: 1px solid var(--appycrew-border);
        padding: 8px 10px;
        font-size: 0.9rem;
      }
      textarea { min-height: 90px; resize: vertical; }
      .hint { font-size: 0.8rem; color: var(--appycrew-muted); margin-top: 4px; }
      .steps { font-size: 0.85rem; color: var(--appycrew-muted); }
      .steps ol { padding-left: 18px; }
      .steps code {
        background: #111827;
        color: #e5e7eb;
        padding: 2px 6px;
        border-radius: 6px;
        font-size: 0.8rem;
      }
      .steps pre {
        background: #111827;
        color: #e5e7eb;
        padding: 10px 12px;
        border-radius: 8px;
        overflow-x: auto;
        font-size: 0.8rem;
      }
      .badge {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        font-size: 0.75rem;
        padding: 4px 8px;
        border-radius: 999px;
        background: var(--appycrew-accent-soft);
        color: #166534;
        margin-bottom: 10px;
      }
      .badge-dot { width: 8px; height: 8px; border-radius: 999px; background: #22c55e; }
    </style>
  </head>
  <body>
    <div class="page">
      <header>
        <div class="badge">
          <span class="badge-dot"></span>
          AppyCrew OCR + Vision Widget v9
        </div>
        <h1>Scan items &amp; forms with AppyCrew</h1>
        <p class="lead">
          This page is only for testing. In production you just include a single
          <code>&lt;script&gt;</code> tag on any form page.
        </p>
      </header>

      <div class="card">
        <div class="grid">
          <section>
            <h2 style="margin-top:0;font-size:1.1rem;">Demo Inventory Item</h2>
            <p class="hint">
              This mimics your “Items 1” card. Use the floating
              “Scan with AppyCrew” button to test auto-filling.
            </p>

            <form class="demo-form" data-appycrew-ocr="true">
              <label class="full">
                Item
                <select name="item_name" data-appycrew-type="item">
                  <option value="">Select items...</option>
                  <option value="chair">Chair</option>
                  <option value="sofa">Sofa</option>
                  <option value="table">Table</option>
                  <option value="box">Box</option>
                </select>
              </label>

              <fieldset style="border:none;padding:0;margin:0;" class="full">
                <legend style="font-size:0.85rem;margin-bottom:4px;">Type</legend>
                <label style="flex-direction:row;align-items:center;gap:6px;font-size:0.8rem;">
                  <input type="radio" name="item_type" value="box" />
                  Box
                </label>
                <label style="flex-direction:row;align-items:center;gap:6px;font-size:0.8rem;">
                  <input type="radio" name="item_type" value="furniture" />
                  Furniture
                </label>
                <label style="flex-direction:row;align-items:center;gap:6px;font-size:0.8rem;">
                  <input type="radio" name="item_type" value="flat-pack" />
                  Flat Pack
                </label>
              </fieldset>

              <label>
                Quantity (Qty)
                <input type="number" name="qty" min="0" step="1" placeholder="0" data-appycrew-type="qty" />
              </label>

              <label class="full">
                Description
                <textarea name="description" placeholder="Colour, condition, handling notes, etc." data-appycrew-type="notes"></textarea>
              </label>

              <label class="full">
                Location
                <select name="location" data-appycrew-type="location">
                  <option value="">Select a room...</option>
                  <option value="living room">Living room</option>
                  <option value="master bedroom">Master bedroom</option>
                  <option value="garage">Garage</option>
                  <option value="kitchen">Kitchen</option>
                </select>
              </label>
            </form>
          </section>

          <section class="steps">
            <h2 style="margin-top:0;font-size:1.05rem;">How to deploy</h2>
            <ol>
              <li>Create a GitHub repo and upload these files to the root.</li>
              <li>Import the repo into <strong>Vercel</strong> as framework “Other”.</li>
              <li>
                In Vercel → Settings → Environment Variables add:
                <ul>
                  <li><code>OCR_SPACE_API_KEY</code> – your OCR.space key.</li>
                  <li><code>OPENAI_API_KEY</code> – your OpenAI key (optional).</li>
                  <li><code>GEMINI_API_KEY</code> – your Gemini key (optional).</li>
                  <li><code>VISION_PROVIDER</code> – <code>openai</code> or <code>gemini</code>.</li>
                  <li><code>VISION_MODE</code> – <code>fallback</code> (default), <code>always</code>, or <code>off</code>.</li>
                </ul>
              </li>
              <li>
                After deploy, your widget URL will be:<br>
                <code>https://YOUR-PROJECT.vercel.app/ocr-widget.js</code>
              </li>
              <li>
                On any form page in your app, add:<br>
                <pre>&lt;script src="https://YOUR-PROJECT.vercel.app/ocr-widget.js" defer&gt;&lt;/script&gt;</pre>
              </li>
            </ol>
            <p class="hint">
              v9 adds: better select & radio filling, React-friendly value updates (to stop values disappearing),
              and improved description extraction so item/location don’t get duplicated into notes.
            </p>
          </section>
        </div>
      </div>
    </div>

    <!-- Load the widget for this demo page -->
    <script src="./ocr-widget.js" defer></script>
  </body>
</html>
